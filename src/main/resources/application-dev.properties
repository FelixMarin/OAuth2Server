# ============================
# üìä LOGGING
# ============================
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.springframework.security.oauth2.server.authorization=DEBUG

# ============================
# üîå Base de datos H2 EN MEMORIA
# ============================
spring.datasource.url=jdbc:h2:mem:oauth2db;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
spring.datasource.username=${H2_USERNAME:sa}
spring.datasource.password=${H2_PASSWORD:}
spring.datasource.driverClassName=org.h2.Driver

# ============================
# üñ•Ô∏è Consola H2
# ============================
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true
server.port=${PORT:8080}

# ============================
# üóÑÔ∏è JPA / Hibernate
# ============================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# ============================
# üì¶ Inicializaci√≥n de datos
# ============================
spring.jpa.defer-datasource-initialization=false
spring.sql.init.mode=never

# ============================
# üîÑ Flyway - SIN PROPIEDADES OBSOLETAS
# ============================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=false
spring.flyway.depends-on=entityManagerFactory

# ============================
# üîê OAuth2 - SOLO propiedades NO sensibles
# ============================
oauth2.client-id=${OAUTH_CLIENT_ID}
oauth2.client-secret=${OAUTH_CLIENT_SECRET}
oauth2.redirect-uri=${OAUTH_REDIRECT_URI}
oauth2.access-token-validity-seconds=${ACCESS_TOKEN_VALIDITY:86400}
oauth2.refresh-token-validity-seconds=${REFRESH_TOKEN_VALIDITY:1296000}

# ============================
# üîë JWT
# ============================
spring.security.oauth2.authorizationserver.issuer=${ISSUER_URL:http://localhost:8080}
spring.security.oauth2.resourceserver.jwt.issuer-uri=${ISSUER_URL:http://localhost:8080}
spring.security.oauth2.resourceserver.jwt.audience=${JWT_AUDIENCE:oauth2-client}
oauth2.jwt-signing-key=${JWT_SIGNING_KEY}