# ============================
# üìä LOGGING
# ============================
logging.level.root=INFO
logging.level.com.oauth.rest=INFO

# ============================
# üîå Base de datos H2 EN MEMORIA
# ============================
spring.datasource.url=jdbc:h2:mem:oauth2db;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;DB_CLOSE_ON_EXIT=TRUE
spring.datasource.username=${H2_USERNAME:sa}
spring.datasource.password=${H2_PASSWORD:}
spring.datasource.driver-class-name=org.h2.Driver

# ============================
# üóÑÔ∏è JPA / Hibernate
# ============================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.defer-datasource-initialization=false

# ============================
# üîÑ Flyway - SIN PROPIEDADES OBSOLETAS
# ============================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=false
spring.flyway.depends-on=entityManagerFactory

# ============================
# üõ°Ô∏è Seguridad
# ============================
spring.h2.console.enabled=false
server.port=${PORT:8080}

# ============================
# üîê OAuth2
# ============================
oauth2.client-id=${OAUTH_CLIENT_ID}
oauth2.client-secret=${OAUTH_CLIENT_SECRET}
oauth2.redirect-uri=${OAUTH_REDIRECT_URI}
oauth2.access-token-validity-seconds=${ACCESS_TOKEN_VALIDITY:86400}
oauth2.refresh-token-validity-seconds=${REFRESH_TOKEN_VALIDITY:1296000}

# ============================
# üîë JWT
# ============================
oauth2.jwt-signing-key=${JWT_SIGNING_KEY}
spring.security.oauth2.authorizationserver.issuer=${ISSUER_URL}
spring.security.oauth2.authorizationserver.tokenendpoint.grant-types=password,refresh_token,client_credentials
spring.security.oauth2.resourceserver.jwt.issuer-uri=${ISSUER_URL}
spring.security.oauth2.resourceserver.jwt.audiences=${JWT_AUDIENCE}